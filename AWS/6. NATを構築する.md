# 1. NATの用途と必要性
* DBサーバーがインターネットに接続していないので、ソフトウェアのインストール等に不便
    * NATはプライベートサブネット ⇒ インターネット の向きの通信だけを許可する
    * NAT(Network Address Translation)
        * NATはプライベートサブネットをパブリックIPアドレスに置換して送出する
        * 接続先はNATが接続してきているように見えるので、NATに応答パケットを返す
        * NATは応答パケットの宛先を元のホストのIPに置換してプライベートサブネットに転送する
        * 家庭のルーターもパブリックIPアドレスは一つだが、ルーターにNATが入っているので、複数台のホストが接続できる
* 今回はNATゲートウェイをパブリックサブネットの中に設置する

# 2. NATゲートウェイを構築する
## NATゲートウェイを構築
* VPC ⇒ NATゲートウェイ ⇒ NATゲートウェイを作成
* サブネット: パブリックサブネット ⇒ Elastic IPの割り当て ⇒ NATゲートウェイを作成

## ルートテーブルを更新
送信先が未知の時に、NATゲートウェイに送信する。
* ルートテーブル ⇒ プライベートサブネットのルートテーブルを選択
* ルート ⇒ ルートを編集 ⇒ 送信先: 0.0.0.0/0、ターゲット: NATゲートウェイ ⇒ 保存

# 3. NATゲートウェイを通じた疎通確認をする
* 全章の踏み台サーバーを経由して、プライベートサブネットにSSH接続

```sh
# 以下コマンドで官邸のHPにアクセスできるか確認する
# curl: HTTPやFTPでファイルをダウンロードしたりアップロードするコマンド
curl www.kantei.go.jp
```

* NATゲートウェイは使い終わったら、アクション ⇒ NATゲートウェイの削除 で削除する
* そのときElasticIPも料金が発生するので解放する

