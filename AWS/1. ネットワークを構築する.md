# 1. 実験用のVPCを作成する
VPC: Virtual Private Cloud  
IPv4 のIPが枯渇してきており、IPv6への移行が考えられている  

* VPCを開く
* リージョンから東京を選択
* VPCを作成
    * 名前タグ: VPC領域
    * IPv4 CIDR: 10.0.0.0/16
    * 作成ボタンを押す

# 2. VPCをサブネットに分割する
VPCをさらに分割して利用することがほとんど。これをサブネットという。  
今回は256分割する。
分割する理由は、障害への対応と、セキュリティを個別に設定する為。  

今回は以下のように設定する。このように片方をインターネットからアクセスできないようにするのは、
セキュリティを高めるときによく用いられるネットワーク構成である。  

* パブリックサブネット(10.0.1.0/24)
* プライベートサブネット(10.0.2.0/24)
  

* サブネット ⇒ サブネットを作成
* VPCを選択
    * 名前タグ: パブリックサブネット
    * IPv4 CIDR: 10.0.1.0/24)
    * 作成ボタンを押す

# 3. インターネット回線とルーティング
サブネットをインターネットに接続するにはインターネットゲートウェイを使う。

* インターネットゲートウェイ ⇒ インターネットゲートウェイの作成
* アクション ⇒ VPCにアタッチ ⇒ 前に作成した、「VPC領域」を選択

### ルーティング
* インターネットで使われているTCP/IPプロトコルではデータを細切れにしたパケットという単位で送受信する  
* パケットはヘッダー情報と、データを含んでおり、ヘッダー情報の一つが宛先IPアドレスである
* ルーターは宛先IPアドレスを見ながら、最終目的地までパケットを到達させる
    * それぞれのルーターにはルートテーブルを設定しておき、パケットが到着したときに次のネットワークに転送する
    * ルートテーブルは　宛先アドレス、流すべきネットワークの入り口となるルーター　という書式で設定されている

サブネットのルートテーブルを確認する
* サブネット ⇒ ルートテーブル
    * 初期設定は 送信先:10.0.0.0/16 ターゲット:Local となっている
        * これは10.0.0.0/16 の範囲外の宛先のパケットを破棄するため、インターネットに接続できない
    * インターネットに接続するには、0.0.0.0/0の宛先のパケットをインターネットゲートウェイに転送すればよい
        * これはデフォルトの意味になる(デフォルトゲートウェイ)
* ルートテーブルの作成 ⇒ 名前タグ: パブリックルートテーブル に設定 ⇒ VPCに「VPC領域」を選んで作成
    * サブネットの関連付け ⇒ サブネットの関連付けの編集 ⇒ サブネットを選択し保存
    * ルートの編集 ⇒ ルートを追加 ⇒ 0.0.0.0/0 Target: 作成したインターネットゲートウェイ ⇒ ルートの保存